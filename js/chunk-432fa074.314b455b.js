(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-432fa074"],{"18b5":function(e,t,c){"use strict";c.r(t);var r=c("7a23"),s=c("4b50"),a=c.n(s),o=Object(r["h"])("div",{class:"rotationLoading"},[Object(r["h"])("img",{src:a.a,alt:"loading",class:"img-fluid"})],-1),i={class:"checkingOrder containerTop g-1","data-aos":"zoom-in"},l=Object(r["h"])("h1",{class:"pageTitle position-relative text-center mb-5 p-2"},[Object(r["h"])("span",{class:"fs-2"},"Checking Order"),Object(r["h"])("br"),Object(r["h"])("span",{class:"fs-4"},"查詢訂單")],-1),d={class:"row"},n={class:"col-md-4"},b={class:"border p-3 mb-3"},O={class:"mb-3"},h={class:"row row-cols-1 g-3"},u={class:"col"},m=Object(r["h"])("label",{for:"email",class:"form-label"},"信箱",-1),j=Object(r["h"])("div",{class:"col mx-auto"},[Object(r["h"])("button",{type:"submit",class:"btn btn-primary fw-bold fs-5 w-100 mt-3"}," 查詢訂單編號 ")],-1),p={class:"col-md-8"},f={class:"border p-3"},g={class:"table"},v=Object(r["h"])("thead",null,[Object(r["h"])("tr",null,[Object(r["h"])("th",{scope:"col"},"訂購日期"),Object(r["h"])("th",{scope:"col"},"訂單編號"),Object(r["h"])("th",{scope:"col",class:"d-none d-sm-table-cell"},"總金額"),Object(r["h"])("th",{scope:"col",width:"50"},"操作")])],-1),k={key:0},y={scope:"row",colspan:"4",class:"text-center text-secondary p-3"},x={scope:"row",class:"text-break"},w=["onClick"],L={class:"d-none d-sm-table-cell"},C=["onClick"],M=Object(r["h"])("i",{class:"bi bi-eye-fill"},null,-1),N=[M];function A(e,t,c,s,a,M){var A=Object(r["K"])("Loading"),$=Object(r["K"])("Field"),K=Object(r["K"])("error-message"),I=Object(r["K"])("Form"),T=Object(r["K"])("CheckingOrderModal");return Object(r["A"])(),Object(r["g"])(r["a"],null,[Object(r["k"])(A,{active:a.isLoading,"onUpdate:active":t[0]||(t[0]=function(e){return a.isLoading=e}),"z-index":9999},{default:Object(r["Y"])((function(){return[o]})),_:1},8,["active"]),Object(r["h"])("div",i,[l,Object(r["h"])("div",d,[Object(r["h"])("div",n,[Object(r["h"])("div",b,[Object(r["k"])(I,{onSubmit:M.sendCheckingOrder,ref:"checkingOrder"},{default:Object(r["Y"])((function(e){var c=e.errors;return[Object(r["h"])("div",O,[Object(r["h"])("div",h,[Object(r["h"])("div",u,[m,Object(r["k"])($,{id:"email",name:"email",type:"email",class:Object(r["s"])(["form-control focusNone",{"is-invalid":c["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:a.email,"onUpdate:modelValue":t[1]||(t[1]=function(e){return a.email=e}),modelModifiers:{trim:!0}},null,8,["class","modelValue"]),c?(Object(r["A"])(),Object(r["e"])(K,{key:0,name:"email",class:"invalid-feedback errorText text-persimmon"})):Object(r["f"])("",!0)]),j])])]})),_:1},8,["onSubmit"])])]),Object(r["h"])("div",p,[Object(r["h"])("div",f,[Object(r["h"])("table",g,[v,Object(r["h"])("tbody",null,[0===a.foundOrders.length?(Object(r["A"])(),Object(r["g"])("tr",k,[Object(r["h"])("th",y,Object(r["N"])(a.msg),1)])):(Object(r["A"])(!0),Object(r["g"])(r["a"],{key:1},Object(r["I"])(a.foundOrders,(function(t){return Object(r["A"])(),Object(r["g"])("tr",{key:t.id},[Object(r["h"])("th",x,Object(r["N"])(e.$filters.date(1e3*t.create_at)),1),Object(r["h"])("td",{class:"text-break",role:"button",onClick:function(e){return M.copyId(t.id)}},Object(r["N"])(t.id),9,w),Object(r["h"])("td",L,Object(r["N"])(e.$filters.currency(t.total)),1),Object(r["h"])("td",{class:"text-center",role:"button",onClick:function(e){return M.look(t.id)}},N,8,C)])})),128))])])])])])]),Object(r["k"])(T,{ref:"checkOrderModal",tempOrder:a.tempOrder},null,8,["tempOrder"])],64)}c("4de4"),c("d3b7"),c("99af");var $={class:"modal fade",id:"compoundModal",tabindex:"-1","aria-labelledby":"compoundModalLabel","aria-hidden":"true",ref:"compoundModal"},K={class:"modal-dialog modal-lg"},I={class:"modal-content border-0"},T={class:"modal-header bg-primary text-white"},q={class:"modal-title",id:"compoundModalLabel"},U=Object(r["h"])("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),V={class:"modal-body p-0"},_={class:"me-3"},z=["src","alt"],F={class:"text"},J={class:"title mb-2"},S={class:"qty mb-2"},Y={class:"text-persimmon fst-italic fw-bold"},E={class:"modal-footer"},B={class:"text-persimmon fst-italic fs-5 fw-bold me-auto"},D=Object(r["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 關閉 ",-1);function G(e,t,c,s,a,o){return Object(r["A"])(),Object(r["g"])("div",$,[Object(r["h"])("div",K,[Object(r["h"])("div",I,[Object(r["h"])("div",T,[Object(r["h"])("h5",q,Object(r["N"])(c.tempOrder.id)+" 訂單明細",1),U]),Object(r["h"])("div",V,[(Object(r["A"])(!0),Object(r["g"])(r["a"],null,Object(r["I"])(c.tempOrder.products,(function(t){return Object(r["A"])(),Object(r["g"])("div",{key:t.id,class:"d-flex align-items-center border-bottom p-3"},[Object(r["h"])("div",_,[Object(r["h"])("img",{src:t.product.imageUrl,alt:t.product.title,width:"100"},null,8,z)]),Object(r["h"])("div",F,[Object(r["h"])("div",J,Object(r["N"])(t.product.title),1),Object(r["h"])("div",S,"數量："+Object(r["N"])(t.qty),1),Object(r["h"])("div",Y," 單品總計："+Object(r["N"])(e.$filters.currency(t.total)),1)])])})),128))]),Object(r["h"])("div",E,[Object(r["h"])("div",B," 總金額："+Object(r["N"])(e.$filters.currency(c.tempOrder.total)),1),D])])])],512)}var H=c("e0ae"),P={props:{tempOrder:{type:Object}},mixins:[H["a"]]},Q=c("6b0d"),R=c.n(Q);const W=R()(P,[["render",G]]);var X=W,Z={components:{CheckingOrderModal:X},data:function(){return{orders:[],foundOrders:[],tempOrder:{},isLoading:!1,email:"",msg:"請輸入信箱來查詢訂單"}},created:function(){this.getOrders()},inject:["emitter"],methods:{sendCheckingOrder:function(){var e=this;this.$refs.checkingOrder.validate().then((function(t){t.valid&&(e.foundOrders=e.orders.filter((function(t){return t.user.email===e.email})),e.foundOrders.length>0?e.msg="":e.msg="沒有任何訂購紀錄")}))},getOrders:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("ch-api","/orders");this.$http.get(t).then((function(t){t.data.success&&(e.orders=t.data.orders,e.isLoading=!1)}))},copyId:function(e){var t=this;this.$copyText(e).then((function(){t.emitter.emit("push-message",{style:"success",title:"複製產品編號成功"})}))},look:function(e){var t=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("ch-api","/order/").concat(e);this.$http.get(c).then((function(e){if(e.data.success){t.tempOrder=e.data.order,t.isLoading=!1;var c=t.$refs.checkOrderModal;c.showModal()}}))}}};const ee=R()(Z,[["render",A]]);t["default"]=ee},"4b50":function(e,t,c){e.exports=c.p+"img/loading.470fd1db.png"},"4de4":function(e,t,c){"use strict";var r=c("23e7"),s=c("b727").filter,a=c("1dde"),o=a("filter");r({target:"Array",proto:!0,forced:!o},{filter:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-432fa074.314b455b.js.map