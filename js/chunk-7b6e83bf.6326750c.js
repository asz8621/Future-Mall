(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b6e83bf"],{"159b":function(t,e,c){var i=c("da84"),n=c("fdbc"),r=c("785a"),o=c("17c2"),s=c("9112"),a=function(t){if(t&&t.forEach!==o)try{s(t,"forEach",o)}catch(e){t.forEach=o}};for(var d in n)n[d]&&a(i[d]&&i[d].prototype);a(r)},"17c2":function(t,e,c){"use strict";var i=c("b727").forEach,n=c("a640"),r=n("forEach");t.exports=r?[].forEach:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}},"2c3e":function(t,e,c){"use strict";c("c069")},8676:function(t,e,c){},a640:function(t,e,c){"use strict";var i=c("d039");t.exports=function(t,e){var c=[][t];return!!c&&i((function(){c.call(null,e||function(){throw 1},1)}))}},c069:function(t,e,c){},c740:function(t,e,c){"use strict";var i=c("23e7"),n=c("b727").findIndex,r=c("44d2"),o="findIndex",s=!0;o in[]&&Array(1)[o]((function(){s=!1})),i({target:"Array",proto:!0,forced:s},{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),r(o)},d2f1:function(t,e,c){"use strict";c.r(e);c("a4d3"),c("e01a");var i=c("7a23"),n=c("4b50"),r=c.n(n),o=function(t){return Object(i["D"])("data-v-49e6507c"),t=t(),Object(i["B"])(),t},s=o((function(){return Object(i["h"])("div",{class:"rotationLoading"},[Object(i["h"])("img",{src:r.a,alt:"loading",class:"img-fluid"})],-1)})),a={class:"product containerTop border mb-5"},d={class:"row g-0"},u={class:"col-12 col-lg-6"},l={class:"position-relative"},b=o((function(){return Object(i["h"])("i",{class:"bi bi-chevron-left"},null,-1)})),p=[b],f=["src","alt"],h=o((function(){return Object(i["h"])("i",{class:"bi bi-chevron-right"},null,-1)})),j=[h],O={class:"col-12 col-lg-6 align-self-center"},g={class:"p-3"},m={class:"position-relative"},v={class:"position-absolute bottom-0 end-0 badge rounded-pill bg-secondary"},y={class:"text-secondary"},w={class:"d-flex justify-content-between align-items-center mb-3"},x={class:"text-decoration-line-through text-secondary fst-italic m-0"},k={class:"text-persimmon fst-italic fw-bold fs-5 m-0"},L={class:"operate d-flex justify-content-between align-items-center flex-column flex-lg-row mb-5"},P={class:"operateNum d-flex mb-3 mb-lg-0"},A=["disabled"],N=["disabled"],C=["disabled"],q=["disabled"],I={key:0},$=o((function(){return Object(i["h"])("i",{class:"bi bi-cart-plus"},null,-1)})),S=Object(i["j"])(" Add Cart "),B=[$,S],F={key:1,class:"spinner-border spinner-border-sm",role:"status"},_=o((function(){return Object(i["h"])("span",{class:"visually-hidden"},"Loading...",-1)})),D=[_],E=["innerHTML"],J={key:0,class:"row mb-5","data-aos":"fade-up"},T=o((function(){return Object(i["h"])("h2",null,"相關產品",-1)}));function V(t,e,c,n,r,o){var b=Object(i["K"])("Loading"),h=Object(i["K"])("RelatedProducts");return Object(i["A"])(),Object(i["g"])(i["a"],null,[Object(i["k"])(b,{active:r.isLoading,"onUpdate:active":e[0]||(e[0]=function(t){return r.isLoading=t}),"z-index":9999},{default:Object(i["Y"])((function(){return[s]})),_:1},8,["active"]),Object(i["h"])("div",a,[Object(i["h"])("div",d,[Object(i["h"])("div",u,[Object(i["h"])("div",l,[r.product.num!==r.products.length?(Object(i["A"])(),Object(i["g"])("button",{key:0,type:"button",class:"preBtn btn btn-outline-primary focusNone position-absolute top-50 start-0 translate-middle-y border-0 fs-2",onClick:e[1]||(e[1]=function(t){return o.switchProduct(r.product.num,"pre")})},p)):Object(i["f"])("",!0),Object(i["h"])("img",{src:r.product.imageUrl,alt:r.product.title,class:"img-fluid"},null,8,f),1!==r.product.num?(Object(i["A"])(),Object(i["g"])("button",{key:1,type:"button",class:"nextBtn btn btn-outline-primary focusNone position-absolute top-50 end-0 translate-middle-y border-0 fs-2",onClick:e[2]||(e[2]=function(t){return o.switchProduct(r.product.num,"next")})},j)):Object(i["f"])("",!0)])]),Object(i["h"])("div",O,[Object(i["h"])("div",g,[Object(i["h"])("div",m,[Object(i["h"])("h1",null,[Object(i["j"])(Object(i["N"])(r.product.title)+" ",1),Object(i["h"])("i",{class:Object(i["s"])(["bi text-persimmon",r.product.favorite?"bi-suit-heart-fill":"bi-suit-heart"]),role:"button",onClick:e[3]||(e[3]=function(t){return o.addFavorite(r.product.id)})},null,2)]),Object(i["h"])("small",v,Object(i["N"])(r.product.category),1)]),Object(i["h"])("p",y,Object(i["N"])(r.product.description),1),Object(i["h"])("div",w,[Object(i["h"])("p",x,Object(i["N"])(t.$filters.currency(r.product.origin_price)),1),Object(i["h"])("p",k,Object(i["N"])(t.$filters.currency(r.product.price)),1)]),Object(i["h"])("div",L,[Object(i["h"])("div",P,[Object(i["h"])("button",{type:"button",class:"focusNone btn btn-secondary rounded-0",onClick:e[4]||(e[4]=function(t){return o.calculateNum("-")}),disabled:1===r.qty||r.btnLoading===r.product.id},"-",8,A),Object(i["Z"])(Object(i["h"])("input",{type:"number",class:"outlineNone border-0 border-top border-bottom border-secondary text-center w-100",min:"1","onUpdate:modelValue":e[5]||(e[5]=function(t){return r.qty=t}),disabled:r.btnLoading===r.product.id},null,8,N),[[i["T"],r.qty]]),Object(i["h"])("button",{type:"button",class:"focusNone btn btn-secondary rounded-0",onClick:e[6]||(e[6]=function(t){return o.calculateNum("+")}),disabled:r.btnLoading===r.product.id},"+",8,C)]),Object(i["h"])("button",{type:"button",class:"operateAddBtn focusNone btn btn-persimmon text-white fw-bold",onClick:e[7]||(e[7]=function(t){return o.addCart(r.product)}),disabled:r.btnLoading===r.product.id},[r.btnLoading!==r.product.id?(Object(i["A"])(),Object(i["g"])("span",I,B)):(Object(i["A"])(),Object(i["g"])("div",F,D))],8,q)]),Object(i["h"])("div",{class:"text-break",innerHTML:r.product.content},null,8,E)])])])]),0!==r.relatedProducts.length?(Object(i["A"])(),Object(i["g"])("div",J,[T,Object(i["k"])(h,{class:"px-3",relatedProducts:r.relatedProducts,onChangeProduct:o.getProduct},null,8,["relatedProducts","onChangeProduct"])])):Object(i["f"])("",!0)],64)}c("99af"),c("d3b7"),c("159b"),c("4de4"),c("e9c4"),c("c740"),c("a434");var K={class:"relatedProducts border"},Y={class:"overflow-hidden"},U=["src"],M={class:"p-3"},H={class:"fs-5",role:"button"},R={class:"text-secondary fs-6 mb-4"},z={class:"text-persimmon fst-italic text-end fw-bold fs-5 mb-0"},G=["onClick"],Z={key:0,class:"spinner-border spinner-border-sm me-1",role:"status"},Q=Object(i["h"])("span",{class:"visually-hidden"},"Loading...",-1),W=[Q],X={key:1,class:"bi bi-cart-plus me-1"},tt=Object(i["j"])(" Add Cart ");function et(t,e,c,n,r,o){var s=Object(i["K"])("router-link"),a=Object(i["K"])("swiper-slide"),d=Object(i["K"])("swiper");return Object(i["A"])(),Object(i["e"])(d,{breakpoints:r.swiper.rwd,slidesPerGroup:1,freeMode:!0,modules:r.swiper.modules,pagination:r.swiper.pagination},{default:Object(i["Y"])((function(){return[(Object(i["A"])(!0),Object(i["g"])(i["a"],null,Object(i["I"])(c.relatedProducts,(function(e){return Object(i["A"])(),Object(i["e"])(a,{key:e.id},{default:Object(i["Y"])((function(){return[Object(i["h"])("div",K,[Object(i["h"])("div",Y,[Object(i["k"])(s,{to:"/product/".concat(e.id),class:"w-100",onClick:function(c){return t.$emit("change-product",e.id)}},{default:Object(i["Y"])((function(){return[Object(i["h"])("img",{src:e.imageUrl,alt:"",class:"relatedProductsImg img-fluid"},null,8,U)]})),_:2},1032,["to","onClick"])]),Object(i["h"])("div",M,[Object(i["h"])("h3",H,[Object(i["k"])(s,{to:"/product/".concat(e.id),class:"text-decoration-none",onClick:function(c){return t.$emit("change-product",e.id)}},{default:Object(i["Y"])((function(){return[Object(i["j"])(Object(i["N"])(e.title),1)]})),_:2},1032,["to","onClick"])]),Object(i["h"])("p",R,Object(i["N"])(e.description),1),Object(i["h"])("p",z,Object(i["N"])(t.$filters.currency(e.price)),1)]),Object(i["h"])("button",{type:"button",class:"focusNone btn btn-persimmon text-white rounded-0 fw-bold w-100",onClick:Object(i["ab"])((function(t){return o.addCart(e.id)}),["prevent"])},[r.isAddcartLoading&&r.addcartId===e.id?(Object(i["A"])(),Object(i["g"])("div",Z,W)):(Object(i["A"])(),Object(i["g"])("i",X)),tt],8,G)])]})),_:2},1024)})),128))]})),_:1},8,["breakpoints","modules","pagination"])}var ct=c("8349"),it=c("4da1");c("41fa"),c("a1bf"),c("0a7f");it["d"].use([it["c"],it["a"]]);var nt={props:{relatedProducts:{type:Object}},components:{Swiper:ct["a"],SwiperSlide:ct["b"]},inject:["emitter"],data:function(){return{isAddcartLoading:!1,addcartId:"",swiper:{modules:[it["a"],it["c"]],pagination:{clickable:!0},rwd:{0:{slidesPerView:1,spaceBetween:30},414:{slidesPerView:2,spaceBetween:30},768:{slidesPerView:3,spaceBetween:20},991:{slidesPerView:4,spaceBetween:30},1200:{slidesPerView:4,spaceBetween:50}}}}},methods:{addCart:function(t){var e=this;this.isAddcartLoading=!0,this.addcartId=t;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("ch-api","/cart"),i={product_id:t,qty:1};this.$http.post(c,{data:i}).then((function(){e.isAddcartLoading=!1,e.addcartId="",e.emitter.emit("get-data"),e.emitter.emit("push-message",{style:"success",title:"成功加入購物車"})}))}}},rt=(c("2c3e"),c("6b0d")),ot=c.n(rt);const st=ot()(nt,[["render",et]]);var at=st,dt={components:{RelatedProducts:at},data:function(){return{id:"",product:{},products:[],relatedProducts:[],favoriteList:[],isLoading:!1,btnLoading:"",qty:1}},inject:["emitter"],created:function(){this.getProduct()},watch:{qty:function(){this.qty<1&&(this.qty=1)}},methods:{scrollTop:function(){window.scrollTo({top:0,left:0,behavior:"smooth"})},getAllProduct:function(){var t=this,e=[],c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("ch-api","/products/all");this.$http.get(c).then((function(c){c.data.success&&(e=c.data.products,e.forEach((function(e){t.products.unshift({id:e.id,num:e.num})})),t.relatedProducts=e.filter((function(e){return e.category===t.product.category&&e.id!==t.id})),t.isLoading=!1,t.scrollTop())}))},getProduct:function(t){var e=this;this.favoriteList=JSON.parse(localStorage.getItem("favorite"))||[],this.id=t||this.$route.params.id,this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("ch-api","/product/").concat(this.id);this.$http.get(c).then((function(t){t.data.success&&(e.product=t.data.product,-1!==e.favoriteList.indexOf(e.product.id)&&(e.product.favorite=!0),e.getAllProduct())}))},switchProduct:function(t,e){var c=t;"next"===e?(c-=2,this.$router.push("/product/".concat(this.products[c].id)),this.getProduct(this.products[c].id)):(this.$router.push("/product/".concat(this.products[t].id)),this.getProduct(this.products[t].id))},calculateNum:function(t){"-"===t&&(this.qty>1?this.qty-=1:this.qty=1),"+"===t&&(this.qty+=1)},addCart:function(t){var e=this;this.btnLoading=t.id;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("ch-api","/cart"),i={product_id:t.id,qty:this.qty};this.$http.post(c,{data:i}).then((function(){e.btnLoading="",e.qty=1,e.emitter.emit("get-data"),e.emitter.emit("push-message",{style:"success",title:"成功加入購物車"})}))},addFavorite:function(t){if(-1===this.favoriteList.indexOf(t))this.favoriteList.push(t),localStorage.setItem("favorite",JSON.stringify(this.favoriteList));else{var e=this.favoriteList.findIndex((function(e){return e===t}));this.favoriteList.splice(e,1),localStorage.setItem("favorite",JSON.stringify(this.favoriteList))}this.product.favorite=!this.product.favorite,this.emitter.emit("get-data")}}};c("e9da");const ut=ot()(dt,[["render",V],["__scopeId","data-v-49e6507c"]]);e["default"]=ut},e9c4:function(t,e,c){var i=c("23e7"),n=c("da84"),r=c("d066"),o=c("2ba4"),s=c("e330"),a=c("d039"),d=n.Array,u=r("JSON","stringify"),l=s(/./.exec),b=s("".charAt),p=s("".charCodeAt),f=s("".replace),h=s(1..toString),j=/[\uD800-\uDFFF]/g,O=/^[\uD800-\uDBFF]$/,g=/^[\uDC00-\uDFFF]$/,m=function(t,e,c){var i=b(c,e-1),n=b(c,e+1);return l(O,t)&&!l(g,n)||l(g,t)&&!l(O,i)?"\\u"+h(p(t,0),16):t},v=a((function(){return'"\\udf06\\ud834"'!==u("\udf06\ud834")||'"\\udead"'!==u("\udead")}));u&&i({target:"JSON",stat:!0,forced:v},{stringify:function(t,e,c){for(var i=0,n=arguments.length,r=d(n);i<n;i++)r[i]=arguments[i];var s=o(u,null,r);return"string"==typeof s?f(s,j,m):s}})},e9da:function(t,e,c){"use strict";c("8676")}}]);
//# sourceMappingURL=chunk-7b6e83bf.6326750c.js.map